---
pubDatetime: 2025-04-14 12:10:10
tags: ["AI", "Productivity"]
slug: dify-loop-node-guide
source: https://docs.dify.ai/guides/workflow/node/loop
title: 🚀如何用Dify循环节点优化AI工作流！快速上手教程
description: 本文详细解析Dify平台的循环节点功能，帮助技术人员通过自动化流程解决复杂问题，从随机数生成到诗歌创作，实例一步到位！
---

# 🚀如何用Dify循环节点优化AI工作流！快速上手教程

在人工智能开发和自动化流程中，循环是一个不可或缺的工具。今天，我们将带你了解Dify平台中的循环节点（Loop Node），它可以帮助技术人员轻松实现复杂逻辑，优化工作流效率。无论是随机数生成还是诗歌创作，通过本文，你将掌握如何使用循环节点解决问题，并创建令人印象深刻的AI应用！🎉

---

## 什么是循环节点？

**循环节点**是Dify平台中的一个核心功能，用于执行重复性任务。这些任务会根据前一次迭代的结果进行调整，直到满足退出条件或达到最大循环次数。它适合处理递归操作和优化问题，是构建复杂AI工作流的利器！💡

### 循环节点 vs. 迭代节点

以下是循环节点和迭代节点的区别：

| 类型         | 依赖关系                 | 应用场景               |
| ------------ | ------------------------ | ---------------------- |
| **循环节点** | 每次迭代依赖于之前的结果 | 递归操作、优化问题     |
| **迭代节点** | 每次迭代独立执行         | 批量处理、并行数据处理 |

---

## 如何配置循环节点？🛠️

循环节点提供多种配置选项，让你灵活设置工作流逻辑：

### 配置参数一览

| 参数             | 描述                                 | 示例                           |
| ---------------- | ------------------------------------ | ------------------------------ |
| **循环终止条件** | 决定何时退出循环的表达式             | `x < 50`, `error_rate < 0.01`  |
| **最大循环次数** | 防止出现无限循环的上限               | 10, 100, 1000                  |
| **循环变量**     | 在迭代之间持久化的值，供后续节点使用 | 一个计数器 `x += 1` 或文本变量 |
| **退出循环节点** | 满足条件后立即终止循环               | 限制执行10次，无视其他条件     |

如果没有指定退出条件，循环将类似于`while (true)`持续执行，直到达到最大循环次数。

---

## 实例讲解：从基础到高级 🧩

### 🎲 示例 1：基础循环（随机数生成）

**目标**：生成一个1-100之间的随机数，直到出现小于50的数字。

#### 步骤：

1. **设置循环节点**：
   - 配置“循环终止条件”为模板节点返回`done`。
2. **设置代码节点**：
   - 用于生成随机整数（范围1-100）。
3. **设置IF/ELSE节点**：
   - 如果数字≥50：输出“当前数字”，继续循环。
   - 如果数字<50：输出“最终数字”，并通过模板节点返回`done`。
4. **完成工作流**：
   - 一旦生成小于50的数字，工作流自动结束。

📊 **逻辑流程图：**
![基础循环流程图](https://docs.dify.ai/~gitbook/image?url=https%3A%2F%2Fassets-docs.dify.ai%2F2025%2F04%2F282013c48b46d3cc4ebf99323da10a31.png&width=768&dpr=4&quality=100&sign=4d19b9c5&sv=2)

---

### ✍️ 示例 2：高级循环（诗歌创作）

**目标**：通过四次迭代精炼诗歌，每次基于前一版本进行改进。

#### 步骤：

1. **设置循环变量**：
   - `num`: 计数器，从0开始，每次迭代加1。
   - `verse`: 文本变量，初始值为`"我还没开始创作"`。
2. **设置IF/ELSE节点**：
   - 如果`num > 3`：进入“退出循环”节点。
   - 如果`num ≤ 3`：进入LLM（大语言模型）节点。
3. **设置LLM节点**：
   - 根据提示生成诗歌。提示如下：
     ```
     你是一位欧洲文学家，根据 sys.query 创作诗歌。
     verse 是你的上一版作品。基于它继续改进创作。
     ```
4. **设置变量分配器节点**：
   - 每次迭代后，更新`num`（+1）和`verse`（替换为新创作内容）。
5. **完成工作流**：
   - 工作流最终输出四版不同的诗歌，每版基于上一版改进。

📜 **逻辑流程图：**
![高级循环流程图](https://docs.dify.ai/~gitbook/image?url=https%3A%2F%2Fassets-docs.dify.ai%2F2025%2F04%2F9d9fb4db7093521000ac735a26f86962.png&width=768&dpr=4&quality=100&sign=8bdfd5df&sv=2)

---

## 总结 🌟

Dify平台中的循环节点不仅功能强大，还非常灵活，适合各种复杂场景。无论是简单任务还是递归优化，你都可以通过它快速实现自动化工作流。想象一下，用它生成随机数，优化算法，或者创作诗歌，这不仅提高了效率，还让编程过程充满了趣味性！

如果你正在寻找一种方法来简化工作流并增强开发能力，不妨试试Dify平台！✨

赶紧动手实践吧，让你的AI应用更上一层楼！🔥

---

如果你喜欢这篇文章，请点赞、转发或留言告诉我们你的想法！💬
