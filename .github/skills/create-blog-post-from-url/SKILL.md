---
name: create-blog-post-from-url
description: 从给定 URL 抽取信息并生成新的博客 Markdown 文章、资源目录和 frontmatter。
---

当用户提供一个文章 URL 并要求创建博客时，按以下流程执行。

## 输入

- 必需: 原文 URL
- 可选: 指定标题、发布日期、标签、是否需要图片

## 1. 收集信息

- **优先使用 MCP 获取网址内容**（包括页面正文与可见元信息），不要先走普通 fetch。
- 推荐顺序：
  1. 先通过 MCP 浏览器能力打开页面并抓取可访问性树/正文结构。
  2. 如页面有懒加载或折叠内容，继续通过 MCP 交互展开后再抓取。
  3. 必要时跟进页面内的关键链接（如“原文”“Part 2”“参考资料”）补全上下文。
  4. 仅当 MCP 无法访问（如强登录墙、反爬限制、页面崩溃）时，才回退到普通 URL 抓取。
- 获取标题、作者/来源、发布日期、主旨摘要、章节结构。
- 只保留与主题相关的关键段落，避免整段无差别搬运。
- 若需要配图，默认策略是**尽量多保留与正文相关的图片**，不要只保留一两张主图。
- 抓取图片时同时覆盖以下来源：
  - `<img src>`、`data-src`、`data-lazy-src`、`data-original`
  - `<picture><source srcset>` 与 `img[srcset]`
  - Markdown 图片语法 `![alt](url)`
  - CSS 内联背景图（仅当该图出现在正文核心区域）
- 对每张候选图片记录：原始 URL、所在段落/章节、原始 alt/title、尺寸信息（若可得）。

## 2. 翻译与写作

### 2.1 基本要求

- **必须将原文翻译为中文**，包括标题、描述和正文内容。
- 保持技术术语的准确性，专有名词保留英文，首次出现时括号附中文说明。
- 代码示例保持原样，注释翻译为中文。

### 2.2 写作风格（核心）

本博客作者的文风是**有观点的实践者对同行说话**，语气直接、自信、对话感强。生成内容必须严格匹配以下风格特征：

#### 开头：从问题或场景切入

- 用一个真实问题、当下事件或具体场景开场。
- **禁止**用"本文介绍..."、"随着...的发展"、"在当今..."这类空洞开头。
- 好的开头示例：
  - "我让 Claude 给一个现有的 ASP.NET Core API 添加软删除功能，没有任何规划，也没加任何约束..."
  - "大多数 .NET 应用按水平层级来组织代码"

#### 段落：用连贯的叙述，不用碎片化列表

- 概念性内容写成**流畅的段落**，不要拆成项目符号列表。
- 只在并列条目（如配置项、命令列表、对比维度）时才用列表。
- 变换句子长度：短句制造冲击力，长句展开论述。
  - 短句："规律很明确。"、"我选择乐观。"
  - 长句自然展开，不刻意断句。

#### 结构：自然分节，不要机械编号

- 用 `##` / `###` 标题自然分节，**不要用"一、二、三"或"第一步、第二步"编号**。
- 标题用直接的问题或陈述："为什么规划很重要"、"实际效果"。
- 用 `>` 引用块提炼关键洞察或原则。
- 适当使用**对比表格**替代冗长的文字对比。

#### 技术内容：先说为什么，再给代码

- 先解释动机和背景，再展示技术方案。
- 代码示例要**完整、可运行、贴近真实场景**（用 `OrderStatus` 这类领域模型，不用 `foo/bar`）。
- 假定读者有中级水平，不解释标准库函数或基础概念。

#### 结尾：不要写"总结"段

- 用前瞻性陈述或简短有力的结论收尾。
- **禁止**写"总之"、"综上所述"、"本文介绍了..."这类总结段。

### 2.3 绝对禁止的 AI 痕迹

以下模式会让读者一眼看出是 AI 生成的，**必须完全避免**：

**禁止的结构词和过渡语：**

- "首先...其次...最后..."
- "值得注意的是"、"需要强调的是"、"需要指出的是"
- "让我们来看看"、"下面我将介绍"、"接下来让我们"
- "总之"、"综上所述"、"总而言之"
- "在...方面"、"从...角度来看"

**禁止的句式：**

- "不是...，而是..."
- "...的关键在于..."（偶尔一次可以，不能反复出现）
- "这意味着..."（同上）
- "...提供了一种...的方式"
- "值得一提的是"

**禁止的标点和格式：**

- 破折号（用逗号或分句替代）
- 感叹号连用
- 过度加粗（每段最多加粗一处关键词）

**禁止的词汇：**

- 互联网黑话：赋能、抓手、对齐、颗粒度、方法论、落地、心智、赛道、沉淀、闭环、链路
- 空洞修饰：极大地、显著地、无疑、毋庸置疑、不言而喻
- AI 高频词：探索、深入、全面、详细、强大的、优雅的

### 2.4 鼓励使用的写法

- **"这就是..."** 用来点明核心洞察
- **直接的反问或设问**作为段落或章节开头
- **括号补充**英文术语或简短说明，不打断主句
- **具体数字和真实案例**替代抽象描述
- **短句收尾**制造节奏感："规划会翻转这个局面。"
- **第一人称**自然穿插，体现实践者视角

## 3. 生成 ID 与 Slug

- 在 `src/data/blog` 中读取已有文件名，解析 `{ID}-` 数字前缀并递增。
- 将 ID 保持为 3 位数字（例如 `095` -> `096`）。
- Slug 使用 kebab-case；如果标题为中文，转成简短英文/拼音短语并保持唯一。

## 4. 处理图片资源

### 4.1 目标与目录

- 在 `src/assets/{ID}/` 下保存图片资源。
- 目标是：**在不引入明显噪音图的前提下，最大化保留正文相关图片**。
- 只有在没有任何可用图片时才允许不创建目录。

### 4.2 保留与过滤规则

- 默认保留：架构图、流程图、代码截图、图表、步骤截图、示意图。
- 默认过滤：导航/页脚图标、社交 icon、头像、广告位、追踪像素（如 1x1）。
- 对“是否保留”拿不准时，**倾向保留**，避免遗漏关键图。
- 若图片尺寸可得，优先过滤极小图（例如宽 < 160 或高 < 90），但要避免误删数学公式小图。

### 4.3 下载策略（优先保证成功率）

- 先将相对路径图片 URL 解析为绝对 URL。
- 对 `srcset` / `picture`，优先选清晰度更高的版本。
- 下载时带上合理请求头（尤其 Referer 指向原文页），降低 403 风险。
- 并行下载（建议并发 3-5），单张失败自动重试 1 次。
- 对于懒加载页面，先滚动或交互触发图片加载，再抓取最终 URL。
- 对 data URI（base64）图片，直接解码保存为本地文件。

### 4.4 文件命名与格式

- 保留原始格式（png/jpg/webp/gif/svg）。
- 文件名建议：`{序号}-{语义名}.{ext}`，例如 `01-clean-architecture-diagram.png`。
- 若原文件名本身有语义，可沿用并做 kebab-case 规范化。
- 若无法确定语义名，使用稳定命名：`{序号}-image.{ext}`。

### 4.5 Markdown 替换与失败回退

- 将正文中的远程图片引用替换为本地相对路径：
  `../../assets/{ID}/{filename}`
- 尽量保持图片在原文中的出现位置，不要集中移动到文末。
- 每张图片补全简洁、具体的中文 `alt`。
- 某张图下载失败时：
  - 保留原始远程链接，避免内容断裂；
  - 紧邻处添加 HTML 注释说明失败原因与原 URL，便于后续人工补抓。

### 4.6 特殊场景

- 防盗链/CDN 失败：优先重试并带 Referer；仍失败则保留远程链接并注释。
- 动图（GIF/WebP 动画）：优先保留原动画格式。
- SVG：优先保存原始 SVG，不转位图。
- 多页文章（Part 1/2/3）：按需跟进分页并合并抓取图片，避免漏图。

## 5. 生成 Markdown 文件

- 文件路径: `src/data/blog/{ID}-{slug}.md`
- 使用以下 frontmatter 模板并填充**中文内容**:

```yaml
---
pubDatetime: YYYY-MM-DD
title: "文章标题（中文）"
description: "80-120 字中文摘要，概括文章核心观点"
tags: ["Tag1", "Tag2"]
slug: "{slug}"
source: "{original_url}"
---
```

- **不要使用固定的章节模板**（如"背景/关键要点/实践建议"）。根据原文内容自然组织结构，每篇文章的章节应该不同。
- 好的章节标题参考："问题出在哪"、"换个思路"、"实际跑起来是什么样"、"什么时候该用"。

## 6. 质量检查

- **确认所有内容均为中文**，技术术语翻译准确。
- **逐段检查 AI 痕迹**：对照 2.3 节的禁止清单，逐一排查并改写。
- 段落是否像人在说话？读出来是否自然？如果像机器翻译或 AI 生成，重写该段。
- `tags` 保持 2-6 个，包含技术主题（如 `.NET`, `Azure`, `Architecture`）。
- `source` 必须指向原始 URL。
- 文章中图片路径与目录保持一致。
- 图片检查清单：
  - `src/assets/{ID}/` 中确实存在被引用的图片文件。
  - Markdown 中优先使用本地路径，只有失败项保留远程 URL。
  - 图片顺序与正文语义一致，不出现“图文错位”。
  - `alt` 文本为中文且有信息量，不使用空值或 `image` 这类占位词。
  - 对失败下载项已写明注释（便于后续人工修复）。
- **最终自测**：把文章前三段放到"AI 检测器"的视角审视，如果能被识别为 AI 生成，回去改写。
